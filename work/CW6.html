<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width">
    <link rel="icon" href="/305/images/icon192.png">
    <title>Asynchronous Programming </title>

  <style> /* CSS comment */
    body { max-width: 500px; }
    pre { overflow-x: auto; }
    #url { width: 190px; }
    span, #url { color: blue; }
  </style>
</head>

<body>
<pre>
Put a copy of this file to your repo: CW6.html

Modify document.title xxx and the default URL 
(must be different for each student)

Develop init() and check() functions so that the question 
marks on the page are filled with correct values. 
Battery level must be an integer percent value. 
Latitude/Longitude must be in this order, with 4 digits 
after the decimal point, separated by comma.

Take a partial screen shot of the page only (max 500px width) 
-- do not include the console.

Put the link to your page and the image into the required 
</pre>
<h2 id=title title="Modify xxx"></h2>
<p title="navigator.platform">
  Platform: <span id=plat>??</span>
</p>
<p title="Battery level">
  Battery level: <span id=level>??</span>
</p>
<p title="Latitude/Longitude">
  Location: <span id=loc>??</span>
</p>
<p title="URL exists?">
  URL <input type=url id=url value="https://maeyler.github.io/"
      onChange="check()"> <span id=resp>??</span>
</p>
<hr />
<b>Sample code</b>
<pre id=sample>This text is not shown. Why?</pre>

<hr />

<script>
"use strict";
// JavaScript comment
function check() {
    fetch(url.value).then(r => 
      resp.innerText = r.ok? 'OK' : 'Not found'
    ).catch(e => resp.innerText = e)
}
function init() {
    plat.innerText = navigator.platform
    navigator.geolocation.getCurrentPosition(p => 
      loc.innerText = p.coords.latitude.toFixed(4)
                +', '+p.coords.longitude.toFixed(4)
    )
    navigator.getBattery().then(b => 
      level.innerText = 100*b.level+'%'
    )
    check()
}
    title.innerText = document.title;
    sample.innerText = init+'\n'+check;
    init();
</script>

</body>
</html>
